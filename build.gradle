/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.4/samples
 */

plugins{
    id 'java'
    id 'application'
    id 'maven-publish'
}

mainClassName='package1.main'

dependencies {
    implementation group: 'joda-time',name:'joda-time',version:'2.10.12'
}

repositories{
    mavenLocal()

    mavenCentral()
    flatDir{
        dirs 'publish'
    }
}

jar{
    manifest{
        attributes 'Specification-Title': 'ex2 - Eng Software'
        attributes 'Specification-Version': '1.0'
        attributes 'Specification-Vendor': 'ESTG'
        attributes 'Implementation-Title' : 'ex2.main'
        attributes 'Implementation-Version' : 'build01'
        attributes  'Implementation-Vendor' : 'ESTG'
        attributes 'Main-Class' : 'package1.main'
    }
}

task zip(type:Zip, group:"Archive",description:"Archives sources in a zip file"){
  destinationDirectory=file(".")
  archivesBaseName='backup'
  from "build/docs"
  from"src"

}

publishing {
    publications {
        mavenJava(MavenPublication) {
            groupId='org.estg.test'
            artifactId='library'
            version='2.0'
            from components.java


            artifact zip 
        }
    }

    repositories {
        maven{
        url = layout.buildDirectory.dir("publishing-repository")
        }
    }
}

zip.dependsOn javadoc


build.finalizedBy javadoc,publish